<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¨‹å¼èªè¨€ç­†è¨˜æœ¬</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/c.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/latex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/html.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/css.min.js"></script>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #6b8cbc;
            --background-color: #f5f7fa;
            --card-color: #ffffff;
            --text-color: #333333;
            --border-color: #e1e4e8;
            --success-color: #2ecc71;
            --danger-color: #e74c3c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 25px 0;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .app-container {
            display: flex;
            gap: 25px;
            flex-wrap: wrap;
        }

        .sidebar {
            flex: 1;
            min-width: 280px;
            background-color: var(--card-color);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            height: fit-content;
        }

        .main-content {
            flex: 3;
            min-width: 300px;
            background-color: var(--card-color);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
            color: var(--primary-color);
        }

        .note-list {
            margin-top: 20px;
            max-height: 500px;
            overflow-y: auto;
        }

        .note-item {
            padding: 15px;
            margin-bottom: 12px;
            background-color: var(--background-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid transparent;
        }

        .note-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-left-color: var(--secondary-color);
        }

        .note-item.active {
            background-color: var(--secondary-color);
            color: white;
            border-left-color: var(--primary-color);
        }

        .note-item .language-tag {
            font-size: 0.8rem;
            padding: 4px 10px;
            border-radius: 15px;
            background-color: rgba(255, 255, 255, 0.2);
            font-weight: bold;
        }

        .note-item .note-info {
            flex: 1;
        }

        .note-item .note-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .note-item .note-date {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(107, 140, 188, 0.2);
        }

        textarea {
            min-height: 300px;
            font-family: 'Courier New', Courier, monospace;
            resize: vertical;
            line-height: 1.5;
        }

        .btn {
            padding: 12px 24px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-success {
            background-color: var(--success-color);
        }

        .btn-success:hover {
            background-color: #27ae60;
        }

        .btn-danger {
            background-color: var(--danger-color);
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .code-preview {
            margin-top: 30px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .code-preview-header {
            background-color: #2c3e50;
            color: white;
            padding: 10px 15px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .code-preview pre {
            margin: 0;
            border-radius: 0;
            max-height: 400px;
            overflow: auto;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #6c757d;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .empty-state p {
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.8rem;
            color: #6c757d;
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding: 25px;
            color: #6c757d;
            font-size: 0.9rem;
            border-top: 1px solid var(--border-color);
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar, .main-content {
                width: 100%;
            }
            
            .actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ç¨‹å¼èªè¨€ç­†è¨˜æœ¬</h1>
            <p>è¨˜éŒ„ã€å­¸ç¿’å’Œæ•´ç†æ‚¨çš„ç¨‹å¼ç¢¼ç­†è¨˜ - æ”¯æ´å¤šç¨®ç¨‹å¼èªè¨€</p>
        </header>
        
        <div class="app-container">
            <div class="sidebar">
                <h2 class="section-title">ç­†è¨˜åˆ—è¡¨</h2>
                <div class="note-list" id="noteList">
                    <!-- ç­†è¨˜åˆ—è¡¨å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
                    <div class="empty-state">
                        <h3>å°šç„¡ç­†è¨˜</h3>
                        <p>é»æ“Šä¸‹æ–¹ã€Œæ–°å¢ç­†è¨˜ã€é–‹å§‹è¨˜éŒ„</p>
                    </div>
                </div>
                <button class="btn btn-success" id="newNoteBtn" style="width: 100%; margin-top: 20px;">
                    <span>+</span> æ–°å¢ç­†è¨˜
                </button>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="totalNotes">0</div>
                        <div class="stat-label">ç¸½ç­†è¨˜æ•¸</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalLanguages">0</div>
                        <div class="stat-label">ä½¿ç”¨èªè¨€æ•¸</div>
                    </div>
                </div>
            </div>
            
            <div class="main-content">
                <h2 class="section-title">ç·¨è¼¯ç­†è¨˜</h2>
                <form id="noteForm">
                    <div class="form-group">
                        <label for="noteTitle">æ¨™é¡Œ</label>
                        <input type="text" id="noteTitle" placeholder="è¼¸å…¥ç­†è¨˜æ¨™é¡Œ">
                    </div>
                    
                    <div class="form-group">
                        <label for="noteLanguage">ç¨‹å¼èªè¨€</label>
                        <select id="noteLanguage">
                            <option value="javascript">JavaScript</option>
                            <option value="python">Python</option>
                            <option value="java">Java</option>
                            <option value="c">C</option>
                            <option value="cpp">C++</option>
                            <option value="latex">LaTeX</option>
                            <option value="html">HTML</option>
                            <option value="css">CSS</option>
                            <option value="plaintext">ç´”æ–‡å­—</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="noteContent">ç¨‹å¼ç¢¼</label>
                        <textarea id="noteContent" placeholder="è¼¸å…¥æ‚¨çš„ç¨‹å¼ç¢¼..."></textarea>
                    </div>
                    
                    <div class="actions">
                        <button type="submit" class="btn" id="saveNoteBtn">
                            <span>ğŸ’¾</span> å„²å­˜ç­†è¨˜
                        </button>
                        <button type="button" class="btn btn-danger" id="deleteNoteBtn">
                            <span>ğŸ—‘ï¸</span> åˆªé™¤ç­†è¨˜
                        </button>
                    </div>
                </form>
                
                <div class="code-preview">
                    <div class="code-preview-header">
                        <span>ç¨‹å¼ç¢¼é è¦½</span>
                        <span id="previewLanguage">JavaScript</span>
                    </div>
                    <pre><code id="codePreview" class="language-javascript">// é è¦½å°‡é¡¯ç¤ºåœ¨é€™è£¡</code></pre>
                </div>
            </div>
        </div>
        
        <footer>
            <p>ç¨‹å¼èªè¨€ç­†è¨˜æœ¬ &copy; 2023 - å°ˆç‚ºå­¸ç¿’ç¨‹å¼è¨­è¨ˆè€Œè¨­è¨ˆ | æ”¯æ´ JavaScript, Python, Java, C, C++, LaTeX, HTML, CSS</p>
        </footer>
    </div>

    <script>
        // åˆå§‹åŒ– highlight.js
        hljs.highlightAll();

        // æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹
        let notes = JSON.parse(localStorage.getItem('codeNotes')) || [];
        let currentNoteId = null;

        // DOM å…ƒç´ 
        const noteList = document.getElementById('noteList');
        const noteForm = document.getElementById('noteForm');
        const noteTitle = document.getElementById('noteTitle');
        const noteLanguage = document.getElementById('noteLanguage');
        const noteContent = document.getElementById('noteContent');
        const codePreview = document.getElementById('codePreview');
        const previewLanguage = document.getElementById('previewLanguage');
        const newNoteBtn = document.getElementById('newNoteBtn');
        const saveNoteBtn = document.getElementById('saveNoteBtn');
        const deleteNoteBtn = document.getElementById('deleteNoteBtn');
        const totalNotes = document.getElementById('totalNotes');
        const totalLanguages = document.getElementById('totalLanguages');

        // äº‹ä»¶ç›£è½å™¨
        noteForm.addEventListener('submit', saveNote);
        newNoteBtn.addEventListener('click', createNewNote);
        deleteNoteBtn.addEventListener('click', deleteCurrentNote);
        noteLanguage.addEventListener('change', updatePreview);
        noteContent.addEventListener('input', updatePreview);

        // åˆå§‹åŒ–æ‡‰ç”¨
        renderNoteList();
        updatePreview();
        updateStats();

        // å‡½æ•¸å®šç¾©
        function renderNoteList() {
            if (notes.length === 0) {
                noteList.innerHTML = `
                    <div class="empty-state">
                        <h3>å°šç„¡ç­†è¨˜</h3>
                        <p>é»æ“Šä¸‹æ–¹ã€Œæ–°å¢ç­†è¨˜ã€é–‹å§‹è¨˜éŒ„</p>
                    </div>
                `;
                return;
            }

            // æŒ‰æ›´æ–°æ™‚é–“æ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
            notes.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));
            
            noteList.innerHTML = notes.map(note => `
                <div class="note-item ${note.id === currentNoteId ? 'active' : ''}" data-id="${note.id}">
                    <div class="note-info">
                        <div class="note-title">${note.title}</div>
                        <div class="note-date">${new Date(note.updatedAt).toLocaleDateString()} ${new Date(note.updatedAt).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                    </div>
                    <span class="language-tag">${getLanguageName(note.language)}</span>
                </div>
            `).join('');

            // ç‚ºæ¯å€‹ç­†è¨˜é …ç›®æ·»åŠ é»æ“Šäº‹ä»¶
            document.querySelectorAll('.note-item').forEach(item => {
                item.addEventListener('click', () => {
                    const noteId = item.getAttribute('data-id');
                    loadNote(noteId);
                });
            });
        }

        function getLanguageName(langCode) {
            const languages = {
                'javascript': 'JS',
                'python': 'Python',
                'java': 'Java',
                'c': 'C',
                'cpp': 'C++',
                'latex': 'LaTeX',
                'html': 'HTML',
                'css': 'CSS',
                'plaintext': 'Text'
            };
            return languages[langCode] || langCode;
        }

        function getFullLanguageName(langCode) {
            const languages = {
                'javascript': 'JavaScript',
                'python': 'Python',
                'java': 'Java',
                'c': 'C',
                'cpp': 'C++',
                'latex': 'LaTeX',
                'html': 'HTML',
                'css': 'CSS',
                'plaintext': 'ç´”æ–‡å­—'
            };
            return languages[langCode] || langCode;
        }

        function createNewNote() {
            currentNoteId = null;
            noteTitle.value = '';
            noteLanguage.value = 'javascript';
            noteContent.value = '';
            updatePreview();
            renderNoteList();
        }

        function loadNote(noteId) {
            const note = notes.find(n => n.id === noteId);
            if (note) {
                currentNoteId = noteId;
                noteTitle.value = note.title;
                noteLanguage.value = note.language;
                noteContent.value = note.content;
                updatePreview();
                renderNoteList();
            }
        }

        function saveNote(e) {
            e.preventDefault();
            
            const title = noteTitle.value.trim();
            const language = noteLanguage.value;
            const content = noteContent.value;
            
            if (!title) {
                alert('è«‹è¼¸å…¥ç­†è¨˜æ¨™é¡Œ');
                return;
            }
            
            const now = new Date().toISOString();
            
            if (currentNoteId) {
                // æ›´æ–°ç¾æœ‰ç­†è¨˜
                const noteIndex = notes.findIndex(n => n.id === currentNoteId);
                if (noteIndex !== -1) {
                    notes[noteIndex] = {
                        ...notes[noteIndex],
                        title,
                        language,
                        content,
                        updatedAt: now
                    };
                }
            } else {
                // å»ºç«‹æ–°ç­†è¨˜
                const newNote = {
                    id: generateId(),
                    title,
                    language,
                    content,
                    createdAt: now,
                    updatedAt: now
                };
                notes.push(newNote);
                currentNoteId = newNote.id;
            }
            
            // å„²å­˜åˆ°æœ¬åœ°å„²å­˜
            localStorage.setItem('codeNotes', JSON.stringify(notes));
            
            // æ›´æ–°ä»‹é¢
            renderNoteList();
            updateStats();
            
            // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
            showMessage('ç­†è¨˜å·²å„²å­˜ï¼', 'success');
        }

        function deleteCurrentNote() {
            if (!currentNoteId) {
                showMessage('æ²’æœ‰é¸æ“‡è¦åˆªé™¤çš„ç­†è¨˜', 'error');
                return;
            }
            
            if (confirm('ç¢ºå®šè¦åˆªé™¤æ­¤ç­†è¨˜å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚')) {
                notes = notes.filter(note => note.id !== currentNoteId);
                localStorage.setItem('codeNotes', JSON.stringify(notes));
                createNewNote();
                renderNoteList();
                updateStats();
                showMessage('ç­†è¨˜å·²åˆªé™¤', 'success');
            }
        }

        function updatePreview() {
            const language = noteLanguage.value;
            const content = noteContent.value || '// é è¦½å°‡é¡¯ç¤ºåœ¨é€™è£¡';
            
            codePreview.textContent = content;
            codePreview.className = `language-${language}`;
            previewLanguage.textContent = getFullLanguageName(language);
            hljs.highlightElement(codePreview);
        }

        function updateStats() {
            totalNotes.textContent = notes.length;
            
            // è¨ˆç®—ä½¿ç”¨çš„èªè¨€æ•¸é‡
            const languages = new Set(notes.map(note => note.language));
            totalLanguages.textContent = languages.size;
        }

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function showMessage(message, type) {
            // å»ºç«‹è¨Šæ¯å…ƒç´ 
            const messageEl = document.createElement('div');
            messageEl.textContent = message;
            messageEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                transition: transform 0.3s, opacity 0.3s;
                transform: translateX(100%);
                opacity: 0;
            `;
            
            if (type === 'success') {
                messageEl.style.backgroundColor = 'var(--success-color)';
            } else {
                messageEl.style.backgroundColor = 'var(--danger-color)';
            }
            
            document.body.appendChild(messageEl);
            
            // é¡¯ç¤ºè¨Šæ¯
            setTimeout(() => {
                messageEl.style.transform = 'translateX(0)';
                messageEl.style.opacity = '1';
            }, 10);
            
            // éš±è—è¨Šæ¯
            setTimeout(() => {
                messageEl.style.transform = 'translateX(100%)';
                messageEl.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(messageEl);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
